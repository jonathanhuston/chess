global brainprocedure initializebrain ();	brain := list (2);end	procedure chessfunction (board, pieces, flags, color, origin, dest);local piece, moves, fromsquare, tosquare;	moves := set ();	until *moves > 0 do {		piece := ? pieces;		fromsquare := ? piece [color];		if /fromsquare then next;		generatemoves (board, pieces, flags, color, fromsquare, moves, king);	};	tosquare := ? moves;	copysquare (fromsquare, origin);	copysquare (tosquare, dest);endprocedure getcomputermove (board, pieces, flags, color);	local piece, moves, origin, dest;	initial initializebrain ();	origin := position (empty, empty);	dest := position (empty, empty);	chessfunction (board, pieces, flags, color, origin, dest);	movepiece (board, pieces, flags, color, origin, dest);	copysquare (origin, flags.origin);	copysquare (dest, flags.dest);end